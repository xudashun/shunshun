var Wn=Object.defineProperty,qn=Object.defineProperties;var jn=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var At=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var Lt=(e,t,o)=>t in e?Wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,V=(e,t)=>{for(var o in t||(t={}))At.call(t,o)&&Lt(e,o,t[o]);if(Ye)for(var o of Ye(t))Pt.call(t,o)&&Lt(e,o,t[o]);return e},Z=(e,t)=>qn(e,jn(t));var Rt=(e,t)=>{var o={};for(var l in e)At.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(e!=null&&Ye)for(var l of Ye(e))t.indexOf(l)<0&&Pt.call(e,l)&&(o[l]=e[l]);return o};var zt=(e,t,o)=>new Promise((l,n)=>{var a=r=>{try{f(o.next(r))}catch(h){n(h)}},s=r=>{try{f(o.throw(r))}catch(h){n(h)}},f=r=>r.done?l(r.value):Promise.resolve(r.value).then(a,s);f((o=o.apply(e,t)).next())});import{aA as Un,a as gt,m as ie,n as _,ae as Gn,w as Fe,k as yt,ay as Se,ar as Oe,B as F,ab as Ne,r as Yt,aI as Qn,a8 as xn,s as ne,bl as Ht,aF as de,o as Yn,aH as Jn,l as Le,v as Xn,R as rt,ac as Zn,q as _n,t as Ae,bm as eo,y as Jt,bx as to,aq as Xt,P as no,Q as oo,as as Ft,by as it,bz as lo,U as so,bA as ao,F as io,aG as ro,p as co}from"./bootstrap-Dltm03fb.js";import{d as uo,u as Wt,E as fo,a as ho}from"./index-BXH6hP-Y.js";import{s as po,E as vo}from"./index-BgEAOWbj.js";import{e as Zt,f as go,t as qt,E as yo,u as mo}from"./index-DUtMaQX3.js";import{t as bo,d as jt}from"./error-Clqtdljd.js";import{d as Q,p as U,f as S,B as H,k as R,S as Co,au as ko,u as Re,s as oe,c as k,a3 as ye,ah as No,w as B,v as De,K as pe,e as I,h as A,t as le,n as N,ad as We,I as ce,aa as So,m as q,g as P,l as Ee,r as D,o as Te,i as G,W as Eo,a as ae,at as wo,M as mt,aj as J,as as Ko,C as se,O as _e,P as et,D as Ut,A as ze,av as Oo,a9 as be,U as Do,a0 as To,J as _t,ar as dt,E as He}from"../jse/index-index-CTzA6bvf.js";import{c as we}from"./isEqual-xcmoF_3Q.js";import{b as en,u as Io,a as Vo}from"./use-form-item-Ds6Qhq_n.js";import{a as $o,u as Bo}from"./index-C-mFH0ze.js";import{u as tn,a as Mo}from"./use-form-common-props-Dbjezi-2.js";import{U as te,C as nn,u as Lo,p as tt}from"./index-CuY4jbqT.js";import{C as Ao}from"./index-B2_E8BKU.js";import{ElCheckbox as Po}from"./index-DQBztwmV.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-BMgcs-_h.js";import"./index-DZ587tKD.js";function he(){if(!arguments.length)return[];var e=arguments[0];return Un(e)?e:[e]}function Ro(e,t){if(!gt)return;if(!t){e.scrollTop=0;return}const o=[];let l=t.offsetParent;for(;l!==null&&e!==l&&e.contains(l);)o.push(l),l=l.offsetParent;const n=t.offsetTop+o.reduce((r,h)=>r+h.offsetTop,0),a=n+t.offsetHeight,s=e.scrollTop,f=s+e.clientHeight;n<s?e.scrollTop=n:a>f&&(e.scrollTop=a-e.clientHeight)}const zo=Q({name:"ElCollapseTransition"}),Ho=Q(Z(V({},zo),{setup(e){const t=_("collapse-transition"),o=n=>{n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom},l={beforeEnter(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.style.height&&(n.dataset.elExistsHeight=n.style.height),n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0},enter(n){requestAnimationFrame(()=>{n.dataset.oldOverflow=n.style.overflow,n.dataset.elExistsHeight?n.style.maxHeight=n.dataset.elExistsHeight:n.scrollHeight!==0?n.style.maxHeight=`${n.scrollHeight}px`:n.style.maxHeight=0,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom,n.style.overflow="hidden"})},afterEnter(n){n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow},enterCancelled(n){o(n)},beforeLeave(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.dataset.oldOverflow=n.style.overflow,n.style.maxHeight=`${n.scrollHeight}px`,n.style.overflow="hidden"},leave(n){n.scrollHeight!==0&&(n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0)},afterLeave(n){o(n)},leaveCancelled(n){o(n)}};return(n,a)=>(S(),U(Gn,Co({name:Re(t).b()},ko(l)),{default:H(()=>[R(n.$slots,"default")]),_:3},16,["name"]))}}));var Fo=ie(Ho,[["__file","collapse-transition.vue"]]);const Wo=Fe(Fo),on=Symbol("ElSelectGroup"),Ie=Symbol("ElSelect"),ct="ElOption",qo=yt({value:{type:[String,Number,Boolean,Object],required:!0},label:{type:[String,Number]},created:Boolean,disabled:Boolean});function jo(e,t){const o=oe(Ie);o||bo(ct,"usage: <el-select><el-option /></el-select/>");const l=oe(on,{disabled:!1}),n=k(()=>c(he(o.props.modelValue),e.value)),a=k(()=>{var u;if(o.props.multiple){const g=he((u=o.props.modelValue)!=null?u:[]);return!n.value&&g.length>=o.props.multipleLimit&&o.props.multipleLimit>0}else return!1}),s=k(()=>e.label||(ye(e.value)?"":e.value)),f=k(()=>e.value||e.label||""),r=k(()=>e.disabled||t.groupDisabled||a.value),h=De(),c=(u=[],g)=>{if(ye(e.value)){const m=o.props.valueKey;return u&&u.some(C=>No(Se(C,m))===Se(g,m))}else return u&&u.includes(g)},v=()=>{!e.disabled&&!l.disabled&&(o.states.hoveringIndex=o.optionsArray.indexOf(h.proxy))},d=u=>{const g=new RegExp(Zt(u),"i");t.visible=g.test(String(s.value))||e.created};return B(()=>s.value,()=>{!e.created&&!o.props.remote&&o.setSelected()}),B(()=>e.value,(u,g)=>{const{remote:m,valueKey:C}=o.props;if((m?u!==g:!we(u,g))&&(o.onOptionDestroy(g,h.proxy),o.onOptionCreate(h.proxy)),!e.created&&!m){if(C&&ye(u)&&ye(g)&&u[C]===g[C])return;o.setSelected()}}),B(()=>l.disabled,()=>{t.groupDisabled=l.disabled},{immediate:!0}),{select:o,currentLabel:s,currentValue:f,itemSelected:n,isDisabled:r,hoverItem:v,updateOption:d}}const Uo=Q({name:ct,componentName:ct,props:qo,setup(e){const t=_("select"),o=en(),l=k(()=>[t.be("dropdown","item"),t.is("disabled",Re(f)),t.is("selected",Re(s)),t.is("hovering",Re(d))]),n=ce({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:a,itemSelected:s,isDisabled:f,select:r,hoverItem:h,updateOption:c}=jo(e,n),{visible:v,hover:d}=We(n),u=De().proxy;r.onOptionCreate(u),So(()=>{const m=u.value,{selected:C}=r.states,T=C.some($=>$.value===u.value);q(()=>{r.states.cachedOptions.get(m)===u&&!T&&r.states.cachedOptions.delete(m)}),r.onOptionDestroy(m,u)});function g(){f.value||r.handleOptionSelect(u)}return{ns:t,id:o,containerKls:l,currentLabel:a,itemSelected:s,isDisabled:f,select:r,visible:v,hover:d,states:n,hoverItem:h,updateOption:c,selectOptionClick:g}}});function Go(e,t){return pe((S(),I("li",{id:e.id,class:N(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMousemove:e.hoverItem,onClick:F(e.selectOptionClick,["stop"])},[R(e.$slots,"default",{},()=>[A("span",null,le(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Oe,e.visible]])}var bt=ie(Uo,[["render",Go],["__file","option.vue"]]);const Qo=Q({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=oe(Ie),t=_("select"),o=k(()=>e.props.popperClass),l=k(()=>e.props.multiple),n=k(()=>e.props.fitInputWidth),a=D("");function s(){var f;a.value=`${(f=e.selectRef)==null?void 0:f.offsetWidth}px`}return Te(()=>{s(),Ne(e.selectRef,s)}),{ns:t,minWidth:a,popperClass:o,isMultiple:l,isFitInputWidth:n}}});function xo(e,t,o,l,n,a){return S(),I("div",{class:N([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:Ee({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(S(),I("div",{key:0,class:N(e.ns.be("dropdown","header"))},[R(e.$slots,"header")],2)):P("v-if",!0),R(e.$slots,"default"),e.$slots.footer?(S(),I("div",{key:1,class:N(e.ns.be("dropdown","footer"))},[R(e.$slots,"footer")],2)):P("v-if",!0)],6)}var Yo=ie(Qo,[["render",xo],["__file","select-dropdown.vue"]]);const Jo=(e,t)=>{const{t:o}=Yt(),l=en(),n=_("select"),a=_("input"),s=ce({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),f=D(),r=D(),h=D(),c=D(),v=D(),d=D(),u=D(),g=D(),m=D(),C=D(),T=D(),{isComposing:$,handleCompositionStart:W,handleCompositionUpdate:K,handleCompositionEnd:M}=$o({afterComposition:i=>Dt(i)}),{wrapperRef:re,isFocused:j,handleBlur:ue}=Bo(v,{beforeFocus(){return ve.value},afterFocus(){e.automaticDropdown&&!y.value&&(y.value=!0,s.menuVisibleOnFocus=!0)},beforeBlur(i){var p,E;return((p=h.value)==null?void 0:p.isFocusInsideContent(i))||((E=c.value)==null?void 0:E.isFocusInsideContent(i))},afterBlur(){var i;y.value=!1,s.menuVisibleOnFocus=!1,e.validateEvent&&((i=x==null?void 0:x.validate)==null||i.call(x,"blur").catch(p=>jt()))}}),y=D(!1),w=D(),{form:z,formItem:x}=Io(),{inputId:nt}=Vo(e,{formItemContext:x}),{valueOnClear:ot,isEmptyValue:lt}=Qn(e),ve=k(()=>e.disabled||(z==null?void 0:z.disabled)),Ve=k(()=>G(e.modelValue)?e.modelValue.length>0:!lt(e.modelValue)),b=k(()=>{var i;return(i=z==null?void 0:z.statusIcon)!=null?i:!1}),O=k(()=>e.clearable&&!ve.value&&s.inputHovering&&Ve.value),ee=k(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),ge=k(()=>n.is("reverse",!!(ee.value&&y.value))),st=k(()=>(x==null?void 0:x.validateState)||""),rn=k(()=>st.value&&xn[st.value]),dn=k(()=>e.remote?300:0),cn=k(()=>e.remote&&!s.inputValue&&s.options.size===0),un=k(()=>e.loading?e.loadingText||o("el.select.loading"):e.filterable&&s.inputValue&&s.options.size>0&&$e.value===0?e.noMatchText||o("el.select.noMatch"):s.options.size===0?e.noDataText||o("el.select.noData"):null),$e=k(()=>Y.value.filter(i=>i.visible).length),Y=k(()=>{const i=Array.from(s.options.values()),p=[];return s.optionValues.forEach(E=>{const L=i.findIndex(X=>X.value===E);L>-1&&p.push(i[L])}),p.length>=i.length?p:i}),fn=k(()=>Array.from(s.cachedOptions.values())),hn=k(()=>{const i=Y.value.filter(p=>!p.created).some(p=>p.currentLabel===s.inputValue);return e.filterable&&e.allowCreate&&s.inputValue!==""&&!i}),Nt=()=>{e.filterable&&ae(e.filterMethod)||e.filterable&&e.remote&&ae(e.remoteMethod)||Y.value.forEach(i=>{var p;(p=i.updateOption)==null||p.call(i,s.inputValue)})},St=tn(),pn=k(()=>["small"].includes(St.value)?"small":"default"),vn=k({get(){return y.value&&!cn.value},set(i){y.value=i}}),gn=k(()=>{if(e.multiple&&!ne(e.modelValue))return he(e.modelValue).length===0&&!s.inputValue;const i=G(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||ne(i)?!s.inputValue:!0}),yn=k(()=>{var i;const p=(i=e.placeholder)!=null?i:o("el.select.placeholder");return e.multiple||!Ve.value?p:s.selectedLabel}),mn=k(()=>Ht?null:"mouseenter");B(()=>e.modelValue,(i,p)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(s.inputValue="",qe("")),je(),!we(i,p)&&e.validateEvent&&(x==null||x.validate("change").catch(E=>jt()))},{flush:"post",deep:!0}),B(()=>y.value,i=>{i?qe(s.inputValue):(s.inputValue="",s.previousQuery=null,s.isBeforeHide=!0),t("visible-change",i)}),B(()=>s.options.entries(),()=>{gt&&(je(),e.defaultFirstOption&&(e.filterable||e.remote)&&$e.value&&Et())},{flush:"post"}),B([()=>s.hoveringIndex,Y],([i])=>{Yn(i)&&i>-1?w.value=Y.value[i]||{}:w.value={},Y.value.forEach(p=>{p.hover=w.value===p})}),Eo(()=>{s.isBeforeHide||Nt()});const qe=i=>{s.previousQuery===i||$.value||(s.previousQuery=i,e.filterable&&ae(e.filterMethod)?e.filterMethod(i):e.filterable&&e.remote&&ae(e.remoteMethod)&&e.remoteMethod(i),e.defaultFirstOption&&(e.filterable||e.remote)&&$e.value?q(Et):q(bn))},Et=()=>{const i=Y.value.filter(X=>X.visible&&!X.disabled&&!X.states.groupDisabled),p=i.find(X=>X.created),E=i[0],L=Y.value.map(X=>X.value);s.hoveringIndex=$t(L,p||E)},je=()=>{if(e.multiple)s.selectedLabel="";else{const p=G(e.modelValue)?e.modelValue[0]:e.modelValue,E=wt(p);s.selectedLabel=E.currentLabel,s.selected=[E];return}const i=[];ne(e.modelValue)||he(e.modelValue).forEach(p=>{i.push(wt(p))}),s.selected=i},wt=i=>{let p;const E=wo(i);for(let Ce=s.cachedOptions.size-1;Ce>=0;Ce--){const fe=fn.value[Ce];if(E?Se(fe.value,e.valueKey)===Se(i,e.valueKey):fe.value===i){p={value:i,currentLabel:fe.currentLabel,get isDisabled(){return fe.isDisabled}};break}}if(p)return p;const L=E?i.label:i!=null?i:"";return{value:i,currentLabel:L}},bn=()=>{s.hoveringIndex=Y.value.findIndex(i=>s.selected.some(p=>Qe(p)===Qe(i)))},Cn=()=>{s.selectionWidth=r.value.getBoundingClientRect().width},kn=()=>{s.collapseItemWidth=C.value.getBoundingClientRect().width},at=()=>{var i,p;(p=(i=h.value)==null?void 0:i.updatePopper)==null||p.call(i)},Kt=()=>{var i,p;(p=(i=c.value)==null?void 0:i.updatePopper)==null||p.call(i)},Ot=()=>{s.inputValue.length>0&&!y.value&&(y.value=!0),qe(s.inputValue)},Dt=i=>{if(s.inputValue=i.target.value,e.remote)Tt();else return Ot()},Tt=uo(()=>{Ot()},dn.value),Be=i=>{we(e.modelValue,i)||t(nn,i)},Nn=i=>go(i,p=>{const E=s.cachedOptions.get(p);return E&&!E.disabled&&!E.states.groupDisabled}),Sn=i=>{if(e.multiple&&i.code!==de.delete&&i.target.value.length<=0){const p=he(e.modelValue).slice(),E=Nn(p);if(E<0)return;const L=p[E];p.splice(E,1),t(te,p),Be(p),t("remove-tag",L)}},En=(i,p)=>{const E=s.selected.indexOf(p);if(E>-1&&!ve.value){const L=he(e.modelValue).slice();L.splice(E,1),t(te,L),Be(L),t("remove-tag",p.value)}i.stopPropagation(),Ge()},It=i=>{i.stopPropagation();const p=e.multiple?[]:ot.value;if(e.multiple)for(const E of s.selected)E.isDisabled&&p.push(E.value);t(te,p),Be(p),s.hoveringIndex=-1,y.value=!1,t("clear"),Ge()},Vt=i=>{var p;if(e.multiple){const E=he((p=e.modelValue)!=null?p:[]).slice(),L=$t(E,i);L>-1?E.splice(L,1):(e.multipleLimit<=0||E.length<e.multipleLimit)&&E.push(i.value),t(te,E),Be(E),i.created&&qe(""),e.filterable&&!e.reserveKeyword&&(s.inputValue="")}else t(te,i.value),Be(i.value),y.value=!1;Ge(),!y.value&&q(()=>{Ue(i)})},$t=(i,p)=>ne(p)?-1:ye(p.value)?i.findIndex(E=>we(Se(E,e.valueKey),Qe(p))):i.indexOf(p.value),Ue=i=>{var p,E,L,X,Ce;const fe=G(i)?i[0]:i;let xe=null;if(fe!=null&&fe.value){const Me=Y.value.filter(Fn=>Fn.value===fe.value);Me.length>0&&(xe=Me[0].$el)}if(h.value&&xe){const Me=(X=(L=(E=(p=h.value)==null?void 0:p.popperRef)==null?void 0:E.contentRef)==null?void 0:L.querySelector)==null?void 0:X.call(L,`.${n.be("dropdown","wrap")}`);Me&&Ro(Me,xe)}(Ce=T.value)==null||Ce.handleScroll()},wn=i=>{s.options.set(i.value,i),s.cachedOptions.set(i.value,i)},Kn=(i,p)=>{s.options.get(i)===p&&s.options.delete(i)},On=k(()=>{var i,p;return(p=(i=h.value)==null?void 0:i.popperRef)==null?void 0:p.contentRef}),Dn=()=>{s.isBeforeHide=!1,q(()=>{var i;(i=T.value)==null||i.update(),Ue(s.selected)})},Ge=()=>{var i;(i=v.value)==null||i.focus()},Tn=()=>{var i;if(y.value){y.value=!1,q(()=>{var p;return(p=v.value)==null?void 0:p.blur()});return}(i=v.value)==null||i.blur()},In=i=>{It(i)},Vn=i=>{if(y.value=!1,j.value){const p=new FocusEvent("focus",i);q(()=>ue(p))}},$n=()=>{s.inputValue.length>0?s.inputValue="":y.value=!1},Bt=()=>{ve.value||(Ht&&(s.inputHovering=!0),s.menuVisibleOnFocus?s.menuVisibleOnFocus=!1:y.value=!y.value)},Bn=()=>{if(!y.value)Bt();else{const i=Y.value[s.hoveringIndex];i&&!i.isDisabled&&Vt(i)}},Qe=i=>ye(i.value)?Se(i.value,e.valueKey):i.value,Mn=k(()=>Y.value.filter(i=>i.visible).every(i=>i.isDisabled)),Ln=k(()=>e.multiple?e.collapseTags?s.selected.slice(0,e.maxCollapseTags):s.selected:[]),An=k(()=>e.multiple?e.collapseTags?s.selected.slice(e.maxCollapseTags):[]:[]),Mt=i=>{if(!y.value){y.value=!0;return}if(!(s.options.size===0||$e.value===0||$.value)&&!Mn.value){i==="next"?(s.hoveringIndex++,s.hoveringIndex===s.options.size&&(s.hoveringIndex=0)):i==="prev"&&(s.hoveringIndex--,s.hoveringIndex<0&&(s.hoveringIndex=s.options.size-1));const p=Y.value[s.hoveringIndex];(p.isDisabled||!p.visible)&&Mt(i),q(()=>Ue(w.value))}},Pn=()=>{if(!r.value)return 0;const i=window.getComputedStyle(r.value);return Number.parseFloat(i.gap||"6px")},Rn=k(()=>{const i=Pn();return{maxWidth:`${C.value&&e.maxCollapseTags===1?s.selectionWidth-s.collapseItemWidth-i:s.selectionWidth}px`}}),zn=k(()=>({maxWidth:`${s.selectionWidth}px`})),Hn=i=>{t("popup-scroll",i)};return Ne(r,Cn),Ne(g,at),Ne(re,at),Ne(m,Kt),Ne(C,kn),Te(()=>{je()}),{inputId:nt,contentId:l,nsSelect:n,nsInput:a,states:s,isFocused:j,expanded:y,optionsArray:Y,hoverOption:w,selectSize:St,filteredOptionsCount:$e,updateTooltip:at,updateTagTooltip:Kt,debouncedOnInputChange:Tt,onInput:Dt,deletePrevTag:Sn,deleteTag:En,deleteSelected:It,handleOptionSelect:Vt,scrollToOption:Ue,hasModelValue:Ve,shouldShowPlaceholder:gn,currentPlaceholder:yn,mouseEnterEventName:mn,needStatusIcon:b,showClose:O,iconComponent:ee,iconReverse:ge,validateState:st,validateIcon:rn,showNewOption:hn,updateOptions:Nt,collapseTagSize:pn,setSelected:je,selectDisabled:ve,emptyText:un,handleCompositionStart:W,handleCompositionUpdate:K,handleCompositionEnd:M,onOptionCreate:wn,onOptionDestroy:Kn,handleMenuEnter:Dn,focus:Ge,blur:Tn,handleClearClick:In,handleClickOutside:Vn,handleEsc:$n,toggleMenu:Bt,selectOption:Bn,getValueKey:Qe,navigateOptions:Mt,dropdownMenuVisible:vn,showTagList:Ln,collapseTagList:An,popupScroll:Hn,tagStyle:Rn,collapseTagStyle:zn,popperRef:On,inputRef:v,tooltipRef:h,tagTooltipRef:c,prefixRef:d,suffixRef:u,selectRef:f,wrapperRef:re,selectionRef:r,scrollbarRef:T,menuRef:g,tagMenuRef:m,collapseItemRef:C}};var Xo=Q({name:"ElOptions",setup(e,{slots:t}){const o=oe(Ie);let l=[];return()=>{var n,a;const s=(n=t.default)==null?void 0:n.call(t),f=[];function r(h){G(h)&&h.forEach(c=>{var v,d,u,g;const m=(v=(c==null?void 0:c.type)||{})==null?void 0:v.name;m==="ElOptionGroup"?r(!mt(c.children)&&!G(c.children)&&ae((d=c.children)==null?void 0:d.default)?(u=c.children)==null?void 0:u.default():c.children):m==="ElOption"?f.push((g=c.props)==null?void 0:g.value):G(c.children)&&r(c.children)})}return s.length&&r((a=s[0])==null?void 0:a.children),we(f,l)||(l=f,o&&(o.states.optionValues=f)),s}}});const Zo=yt(V(V({name:String,id:String,modelValue:{type:Le([Array,String,Number,Boolean,Object]),default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:_n,effect:{type:Le(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Le(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Wt.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:rt,default:Zn},fitInputWidth:Boolean,suffixIcon:{type:rt,default:Xn},tagType:Z(V({},qt.type),{default:"info"}),tagEffect:Z(V({},qt.effect),{default:"light"}),validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Le(String),values:fo,default:"bottom-start"},fallbackPlacements:{type:Le(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:Wt.appendTo},Jn),Lo(["ariaLabel"])));po.scroll;const Gt="ElSelect",_o=Q({name:Gt,componentName:Gt,components:{ElSelectMenu:Yo,ElOption:bt,ElOptions:Xo,ElTag:yo,ElScrollbar:vo,ElTooltip:ho,ElIcon:Jt},directives:{ClickOutside:Ao},props:Zo,emits:[te,nn,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(e,{emit:t}){const o=k(()=>{const{modelValue:r,multiple:h}=e,c=h?[]:void 0;return G(r)?h?r:c:h?c:r}),l=ce(Z(V({},We(e)),{modelValue:o})),n=Jo(l,t),{calculatorRef:a,inputStyle:s}=mo();be(Ie,ce({props:l,states:n.states,selectRef:n.selectRef,optionsArray:n.optionsArray,setSelected:n.setSelected,handleOptionSelect:n.handleOptionSelect,onOptionCreate:n.onOptionCreate,onOptionDestroy:n.onOptionDestroy}));const f=k(()=>e.multiple?n.states.selected.map(r=>r.currentLabel):n.states.selectedLabel);return Z(V({},n),{modelValue:o,selectedLabel:f,calculatorRef:a,inputStyle:s})}});function el(e,t){const o=J("el-tag"),l=J("el-tooltip"),n=J("el-icon"),a=J("el-option"),s=J("el-options"),f=J("el-scrollbar"),r=J("el-select-menu"),h=Ko("click-outside");return pe((S(),I("div",{ref:"selectRef",class:N([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[Oo(e.mouseEnterEventName)]:c=>e.states.inputHovering=!0,onMouseleave:c=>e.states.inputHovering=!1},[se(l,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:c=>e.states.isBeforeHide=!1},{default:H(()=>{var c;return[A("div",{ref:"wrapperRef",class:N([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:F(e.toggleMenu,["prevent"])},[e.$slots.prefix?(S(),I("div",{key:0,ref:"prefixRef",class:N(e.nsSelect.e("prefix"))},[R(e.$slots,"prefix")],2)):P("v-if",!0),A("div",{ref:"selectionRef",class:N([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?R(e.$slots,"tag",{key:0},()=>[(S(!0),I(_e,null,et(e.showTagList,v=>(S(),I("div",{key:e.getValueKey(v),class:N(e.nsSelect.e("selected-item"))},[se(o,{closable:!e.selectDisabled&&!v.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Ee(e.tagStyle),onClose:d=>e.deleteTag(d,v)},{default:H(()=>[A("span",{class:N(e.nsSelect.e("tags-text"))},[R(e.$slots,"label",{label:v.currentLabel,value:v.value},()=>[Ut(le(v.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(S(),U(l,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:H(()=>[A("div",{ref:"collapseItemRef",class:N(e.nsSelect.e("selected-item"))},[se(o,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Ee(e.collapseTagStyle)},{default:H(()=>[A("span",{class:N(e.nsSelect.e("tags-text"))}," + "+le(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:H(()=>[A("div",{ref:"tagMenuRef",class:N(e.nsSelect.e("selection"))},[(S(!0),I(_e,null,et(e.collapseTagList,v=>(S(),I("div",{key:e.getValueKey(v),class:N(e.nsSelect.e("selected-item"))},[se(o,{class:"in-tooltip",closable:!e.selectDisabled&&!v.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:d=>e.deleteTag(d,v)},{default:H(()=>[A("span",{class:N(e.nsSelect.e("tags-text"))},[R(e.$slots,"label",{label:v.currentLabel,value:v.value},()=>[Ut(le(v.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):P("v-if",!0)]):P("v-if",!0),A("div",{class:N([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[pe(A("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":v=>e.states.inputValue=v,type:"text",name:e.name,class:N([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:Ee(e.inputStyle),tabindex:e.tabindex,role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((c=e.hoverOption)==null?void 0:c.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Ae(F(v=>e.navigateOptions("next"),["stop","prevent"]),["down"]),Ae(F(v=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),Ae(F(e.handleEsc,["stop","prevent"]),["esc"]),Ae(F(e.selectOption,["stop","prevent"]),["enter"]),Ae(F(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:F(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[eo,e.states.inputValue]]),e.filterable?(S(),I("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:N(e.nsSelect.e("input-calculator")),textContent:le(e.states.inputValue)},null,10,["textContent"])):P("v-if",!0)],2),e.shouldShowPlaceholder?(S(),I("div",{key:1,class:N([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?R(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[A("span",null,le(e.currentPlaceholder),1)]):(S(),I("span",{key:1},le(e.currentPlaceholder),1))],2)):P("v-if",!0)],2),A("div",{ref:"suffixRef",class:N(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(S(),U(n,{key:0,class:N([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:H(()=>[(S(),U(ze(e.iconComponent)))]),_:1},8,["class"])):P("v-if",!0),e.showClose&&e.clearIcon?(S(),U(n,{key:1,class:N([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:H(()=>[(S(),U(ze(e.clearIcon)))]),_:1},8,["class","onClick"])):P("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(S(),U(n,{key:2,class:N([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:H(()=>[(S(),U(ze(e.validateIcon)))]),_:1},8,["class"])):P("v-if",!0)],2)],10,["onClick"])]}),content:H(()=>[se(r,{ref:"menuRef"},{default:H(()=>[e.$slots.header?(S(),I("div",{key:0,class:N(e.nsSelect.be("dropdown","header")),onClick:F(()=>{},["stop"])},[R(e.$slots,"header")],10,["onClick"])):P("v-if",!0),pe(se(f,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:N([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical",onScroll:e.popupScroll},{default:H(()=>[e.showNewOption?(S(),U(a,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):P("v-if",!0),se(s,null,{default:H(()=>[R(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[Oe,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(S(),I("div",{key:1,class:N(e.nsSelect.be("dropdown","loading"))},[R(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(S(),I("div",{key:2,class:N(e.nsSelect.be("dropdown","empty"))},[R(e.$slots,"empty",{},()=>[A("span",null,le(e.emptyText),1)])],2)):P("v-if",!0),e.$slots.footer?(S(),I("div",{key:3,class:N(e.nsSelect.be("dropdown","footer")),onClick:F(()=>{},["stop"])},[R(e.$slots,"footer")],10,["onClick"])):P("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[h,e.handleClickOutside,e.popperRef]])}var tl=ie(_o,[["render",el],["__file","select.vue"]]);const nl=Q({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=_("select"),o=D(),l=De(),n=D([]);be(on,ce(V({},We(e))));const a=k(()=>n.value.some(h=>h.visible===!0)),s=h=>{var c;return h.type.name==="ElOption"&&!!((c=h.component)!=null&&c.proxy)},f=h=>{const c=he(h),v=[];return c.forEach(d=>{var u;Do(d)&&(s(d)?v.push(d.component.proxy):G(d.children)&&d.children.length?v.push(...f(d.children)):(u=d.component)!=null&&u.subTree&&v.push(...f(d.component.subTree)))}),v},r=()=>{n.value=f(l.subTree)};return Te(()=>{r()}),to(o,r,{attributes:!0,subtree:!0,childList:!0}),{groupRef:o,visible:a,ns:t}}});function ol(e,t,o,l,n,a){return pe((S(),I("ul",{ref:"groupRef",class:N(e.ns.be("group","wrap"))},[A("li",{class:N(e.ns.be("group","title"))},le(e.label),3),A("li",null,[A("ul",{class:N(e.ns.b("group"))},[R(e.$slots,"default")],2)])],2)),[[Oe,e.visible]])}var ln=ie(nl,[["render",ol],["__file","option-group.vue"]]);const ut=Fe(tl,{Option:bt,OptionGroup:ln}),Qt=Xt(bt);Xt(ln);const ll=yt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:no,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),sl=Q({name:"ElText"}),al=Q(Z(V({},sl),{props:ll,setup(e){const t=e,o=D(),l=tn(),n=_("text"),a=k(()=>[n.b(),n.m(t.type),n.m(l.value),n.is("truncated",t.truncated),n.is("line-clamp",!ne(t.lineClamp))]),s=To().title,f=()=>{var r,h,c,v,d;if(s)return;let u=!1;const g=((r=o.value)==null?void 0:r.textContent)||"";if(t.truncated){const m=(h=o.value)==null?void 0:h.offsetWidth,C=(c=o.value)==null?void 0:c.scrollWidth;m&&C&&C>m&&(u=!0)}else if(!ne(t.lineClamp)){const m=(v=o.value)==null?void 0:v.offsetHeight,C=(d=o.value)==null?void 0:d.scrollHeight;m&&C&&C>m&&(u=!0)}u?o.value.setAttribute("title",g):o.value.removeAttribute("title")};return Te(f),_t(f),(r,h)=>(S(),U(ze(r.tag),{ref_key:"textRef",ref:o,class:N(Re(a)),style:Ee({"-webkit-line-clamp":r.lineClamp})},{default:H(()=>[R(r.$slots,"default")]),_:3},8,["class","style"]))}}));var il=ie(al,[["__file","text.vue"]]);const rl=Fe(il),Ke="$treeNodeId",xt=function(e,t){!t||t[Ke]||Object.defineProperty(t,Ke,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Ct=(e,t)=>t==null?void 0:t[e||Ke],ft=(e,t,o)=>{const l=e.value.currentNode;o();const n=e.value.currentNode;l!==n&&t("current-change",n?n.data:null,n)},ht=e=>{let t=!0,o=!0,l=!0;for(let n=0,a=e.length;n<a;n++){const s=e[n];(s.checked!==!0||s.indeterminate)&&(t=!1,s.disabled||(l=!1)),(s.checked!==!1||s.indeterminate)&&(o=!1)}return{all:t,none:o,allWithoutDisable:l,half:!t&&!o}},Pe=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:o,half:l}=ht(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):l?(e.checked=!1,e.indeterminate=!0):o&&(e.checked=!1,e.indeterminate=!1);const n=e.parent;!n||n.level===0||e.store.checkStrictly||Pe(n)},Je=function(e,t){const o=e.store.props,l=e.data||{},n=o[t];if(ae(n))return n(l,e);if(mt(n))return l[n];if(ne(n)){const a=l[t];return ne(a)?"":a}};let dl=0;class me{constructor(t){this.id=dl++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const o in t)dt(t,o)&&(this[o]=t[o]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const o=t.props;if(o&&typeof o.isLeaf!="undefined"){const a=Je(this,"isLeaf");oo(a)&&(this.isLeafByUser=a)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&!this.isLeafByUser&&this.expand(),G(this.data)||xt(this,this.data),!this.data)return;const l=t.defaultExpandedKeys,n=t.key;n&&l&&l.includes(this.key)&&this.expand(null,t.autoExpandParent),n&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){G(t)||xt(this,t),this.data=t,this.childNodes=[];let o;this.level===0&&G(this.data)?o=this.data:o=Je(this,"children")||[];for(let l=0,n=o.length;l<n;l++)this.insertChild({data:o[l]})}get label(){return Je(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return Je(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const o=t.childNodes.indexOf(this);if(o>-1)return t.childNodes[o+1]}return null}get previousSibling(){const t=this.parent;if(t){const o=t.childNodes.indexOf(this);if(o>-1)return o>0?t.childNodes[o-1]:null}return null}contains(t,o=!0){return(this.childNodes||[]).some(l=>l===t||o&&l.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,o,l){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof me)){if(!l){const n=this.getChildren(!0);n.includes(t.data)||(ne(o)||o<0?n.push(t.data):n.splice(o,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=ce(new me(t)),t instanceof me&&t.initialize()}t.level=this.level+1,ne(o)||o<0?this.childNodes.push(t):this.childNodes.splice(o,0,t),this.updateLeafState()}insertBefore(t,o){let l;o&&(l=this.childNodes.indexOf(o)),this.insertChild(t,l)}insertAfter(t,o){let l;o&&(l=this.childNodes.indexOf(o),l!==-1&&(l+=1)),this.insertChild(t,l)}removeChild(t){const o=this.getChildren()||[],l=o.indexOf(t.data);l>-1&&o.splice(l,1);const n=this.childNodes.indexOf(t);n>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(t){let o=null;for(let l=0;l<this.childNodes.length;l++)if(this.childNodes[l].data===t){o=this.childNodes[l];break}o&&this.removeChild(o)}expand(t,o){const l=()=>{if(o){let n=this.parent;for(;n.level>0;)n.expanded=!0,n=n.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(n=>{n.canFocus=!0})};this.shouldLoadData()?this.loadData(n=>{G(n)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Pe(this),l())}):l()}doCreateChildren(t,o={}){t.forEach(l=>{this.insertChild(Object.assign({data:l},o),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser!="undefined"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,o,l,n){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:s,allWithoutDisable:f}=ht(this.childNodes);!this.isLeaf&&!s&&f&&(this.checked=!1,t=!1);const r=()=>{if(o){const h=this.childNodes;for(let d=0,u=h.length;d<u;d++){const g=h[d];n=n||t!==!1;const m=g.disabled?g.checked:n;g.setChecked(m,o,!0,n)}const{half:c,all:v}=ht(h);v||(this.checked=v,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{r(),Pe(this)},{checked:t!==!1});return}else r()}const a=this.parent;!a||a.level===0||l||Pe(a)}getChildren(t=!1){if(this.level===0)return this.data;const o=this.data;if(!o)return null;const l=this.store.props;let n="children";return l&&(n=l.children||"children"),ne(o[n])&&(o[n]=null),t&&!o[n]&&(o[n]=[]),o[n]}updateChildren(){const t=this.getChildren()||[],o=this.childNodes.map(a=>a.data),l={},n=[];t.forEach((a,s)=>{const f=a[Ke];!!f&&o.findIndex(h=>h[Ke]===f)>=0?l[f]={index:s,data:a}:n.push({index:s,data:a})}),this.store.lazy||o.forEach(a=>{l[a[Ke]]||this.removeChildByData(a)}),n.forEach(({index:a,data:s})=>{this.insertChild({data:s},a)}),this.updateLeafState()}loadData(t,o={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(o).length)){this.loading=!0;const l=a=>{this.childNodes=[],this.doCreateChildren(a,o),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,a)},n=()=>{this.loading=!1};this.store.load(this,l,n)}else t&&t.call(this)}eachNode(t){const o=[this];for(;o.length;){const l=o.shift();o.unshift(...l.childNodes),t(l)}}reInitChecked(){this.store.checkStrictly||Pe(this)}}class cl{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const o in t)dt(t,o)&&(this[o]=t[o]);this.nodesMap={}}initialize(){if(this.root=new me({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,o=>{this.root.doCreateChildren(o),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(t){const o=this.filterNodeMethod,l=this.lazy,n=function(a){return zt(this,null,function*(){const s=a.root?a.root.childNodes:a.childNodes;for(const[f,r]of s.entries())r.visible=o.call(r,t,r.data,r),f%80===0&&f>0&&(yield q()),yield n(r);if(!a.visible&&s.length){let f=!0;f=!s.some(r=>r.visible),a.root?a.root.visible=f===!1:a.visible=f===!1}t&&a.visible&&!a.isLeaf&&(!l||a.loaded)&&a.expand()})};n(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(t){if(t instanceof me)return t;const o=ye(t)?Ct(this.key,t):t;return this.nodesMap[o]||null}insertBefore(t,o){const l=this.getNode(o);l.parent.insertBefore({data:t},l)}insertAfter(t,o){const l=this.getNode(o);l.parent.insertAfter({data:t},l)}remove(t){const o=this.getNode(t);o&&o.parent&&(o===this.currentNode&&(this.currentNode=null),o.parent.removeChild(o))}append(t,o){const l=Ft(o)?this.root:this.getNode(o);l&&l.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],o=this.nodesMap;t.forEach(l=>{const n=o[l];n&&n.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const o=this.key;!t||!t.data||(o?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(l=>{this.deregisterNode(l)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,o=!1){const l=[],n=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(f=>{(f.checked||o&&f.indeterminate)&&(!t||t&&f.isLeaf)&&l.push(f.data),n(f)})};return n(this),l}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(o=>(o||{})[this.key])}getHalfCheckedNodes(){const t=[],o=function(l){(l.root?l.root.childNodes:l.childNodes).forEach(a=>{a.indeterminate&&t.push(a.data),o(a)})};return o(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],o=this.nodesMap;for(const l in o)dt(o,l)&&t.push(o[l]);return t}updateChildren(t,o){const l=this.nodesMap[t];if(!l)return;const n=l.childNodes;for(let a=n.length-1;a>=0;a--){const s=n[a];this.remove(s.data)}for(let a=0,s=o.length;a<s;a++){const f=o[a];this.append(f,l.data)}}_setCheckedKeys(t,o=!1,l){const n=this._getAllNodes().sort((r,h)=>r.level-h.level),a=Object.create(null),s=Object.keys(l);n.forEach(r=>r.setChecked(!1,!1));const f=r=>{r.childNodes.forEach(h=>{var c;a[h.data[t]]=!0,(c=h.childNodes)!=null&&c.length&&f(h)})};for(let r=0,h=n.length;r<h;r++){const c=n[r],v=c.data[t].toString();if(!s.includes(v)){c.checked&&!a[v]&&c.setChecked(!1,!1);continue}if(c.childNodes.length&&f(c),c.isLeaf||this.checkStrictly){c.setChecked(!0,!1);continue}if(c.setChecked(!0,!0),o){c.setChecked(!1,!1);const u=function(g){g.childNodes.forEach(C=>{C.isLeaf||C.setChecked(!1,!1),u(C)})};u(c)}}}setCheckedNodes(t,o=!1){const l=this.key,n={};t.forEach(a=>{n[(a||{})[l]]=!0}),this._setCheckedKeys(l,o,n)}setCheckedKeys(t,o=!1){this.defaultCheckedKeys=t;const l=this.key,n={};t.forEach(a=>{n[a]=!0}),this._setCheckedKeys(l,o,n)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(o=>{const l=this.getNode(o);l&&l.expand(null,this.autoExpandParent)})}setChecked(t,o,l){const n=this.getNode(t);n&&n.setChecked(!!o,l)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const o=this.currentNode;o&&(o.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,o=!0){const l=t[this.key],n=this.nodesMap[l];this.setCurrentNode(n),o&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,o=!0){if(this.currentNodeKey=t,Ft(t)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const l=this.getNode(t);l&&(this.setCurrentNode(l),o&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const ul=Q({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=_("tree"),o=oe("NodeInstance"),l=oe("RootTree");return()=>{const n=e.node,{data:a,store:s}=n;return e.renderContent?e.renderContent(He,{_self:o,node:n,data:a,store:s}):R(l.ctx.slots,"default",{node:n,data:a},()=>[He(rl,{tag:"span",truncated:!0,class:t.be("node","label")},()=>[n.label])])}}});var fl=ie(ul,[["__file","tree-node-content.vue"]]);function sn(e){const t=oe("TreeNodeMap",null),o={treeNodeExpand:l=>{e.node!==l&&e.node.collapse()},children:[]};return t&&t.children.push(o),be("TreeNodeMap",o),{broadcastExpanded:l=>{if(e.accordion)for(const n of o.children)n.treeNodeExpand(l)}}}const an=Symbol("dragEvents");function hl({props:e,ctx:t,el$:o,dropIndicator$:l,store:n}){const a=_("tree"),s=D({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return be(an,{treeNodeDragStart:({event:c,treeNode:v})=>{if(ae(e.allowDrag)&&!e.allowDrag(v.node))return c.preventDefault(),!1;c.dataTransfer.effectAllowed="move";try{c.dataTransfer.setData("text/plain","")}catch(d){}s.value.draggingNode=v,t.emit("node-drag-start",v.node,c)},treeNodeDragOver:({event:c,treeNode:v})=>{const d=v,u=s.value.dropNode;u&&u.node.id!==d.node.id&&it(u.$el,a.is("drop-inner"));const g=s.value.draggingNode;if(!g||!d)return;let m=!0,C=!0,T=!0,$=!0;ae(e.allowDrop)&&(m=e.allowDrop(g.node,d.node,"prev"),$=C=e.allowDrop(g.node,d.node,"inner"),T=e.allowDrop(g.node,d.node,"next")),c.dataTransfer.dropEffect=C||m||T?"move":"none",(m||C||T)&&(u==null?void 0:u.node.id)!==d.node.id&&(u&&t.emit("node-drag-leave",g.node,u.node,c),t.emit("node-drag-enter",g.node,d.node,c)),m||C||T?s.value.dropNode=d:s.value.dropNode=null,d.node.nextSibling===g.node&&(T=!1),d.node.previousSibling===g.node&&(m=!1),d.node.contains(g.node,!1)&&(C=!1),(g.node===d.node||g.node.contains(d.node))&&(m=!1,C=!1,T=!1);const W=d.$el.querySelector(`.${a.be("node","content")}`).getBoundingClientRect(),K=o.value.getBoundingClientRect();let M;const re=m?C?.25:T?.45:1:-1,j=T?C?.75:m?.55:0:1;let ue=-9999;const y=c.clientY-W.top;y<W.height*re?M="before":y>W.height*j?M="after":C?M="inner":M="none";const w=d.$el.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),z=l.value;M==="before"?ue=w.top-K.top:M==="after"&&(ue=w.bottom-K.top),z.style.top=`${ue}px`,z.style.left=`${w.right-K.left}px`,M==="inner"?lo(d.$el,a.is("drop-inner")):it(d.$el,a.is("drop-inner")),s.value.showDropIndicator=M==="before"||M==="after",s.value.allowDrop=s.value.showDropIndicator||$,s.value.dropType=M,t.emit("node-drag-over",g.node,d.node,c)},treeNodeDragEnd:c=>{const{draggingNode:v,dropType:d,dropNode:u}=s.value;if(c.preventDefault(),c.dataTransfer&&(c.dataTransfer.dropEffect="move"),v&&u){const g={data:v.node.data};d!=="none"&&v.node.remove(),d==="before"?u.node.parent.insertBefore(g,u.node):d==="after"?u.node.parent.insertAfter(g,u.node):d==="inner"&&u.node.insertChild(g),d!=="none"&&(n.value.registerNode(g),n.value.key&&v.node.eachNode(m=>{var C;(C=n.value.nodesMap[m.data[n.value.key]])==null||C.setChecked(m.checked,!n.value.checkStrictly)})),it(u.$el,a.is("drop-inner")),t.emit("node-drag-end",v.node,u.node,d,c),d!=="none"&&t.emit("node-drop",v.node,u.node,d,c)}v&&!u&&t.emit("node-drag-end",v.node,null,d,c),s.value.showDropIndicator=!1,s.value.draggingNode=null,s.value.dropNode=null,s.value.allowDrop=!0}}),{dragState:s}}const pl=Q({name:"ElTreeNode",components:{ElCollapseTransition:Wo,ElCheckbox:Po,NodeContent:fl,ElIcon:Jt,Loading:so},props:{node:{type:me,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const o=_("tree"),{broadcastExpanded:l}=sn(e),n=oe("RootTree"),a=D(!1),s=D(!1),f=D(),r=D(),h=D(),c=oe(an),v=De();be("NodeInstance",v),e.node.expanded&&(a.value=!0,s.value=!0);const d=n.props.props.children||"children";B(()=>{var y;const w=(y=e.node.data)==null?void 0:y[d];return w&&[...w]},()=>{e.node.updateChildren()}),B(()=>e.node.indeterminate,y=>{m(e.node.checked,y)}),B(()=>e.node.checked,y=>{m(y,e.node.indeterminate)}),B(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),B(()=>e.node.expanded,y=>{q(()=>a.value=y),y&&(s.value=!0)});const u=y=>Ct(n.props.nodeKey,y.data),g=y=>{const w=e.props.class;if(!w)return{};let z;if(ae(w)){const{data:x}=y;z=w(x,y)}else z=w;return mt(z)?{[z]:!0}:z},m=(y,w)=>{(f.value!==y||r.value!==w)&&n.ctx.emit("check-change",e.node.data,y,w),f.value=y,r.value=w},C=y=>{ft(n.store,n.ctx.emit,()=>{var w;if((w=n==null?void 0:n.props)==null?void 0:w.nodeKey){const x=u(e.node);n.store.value.setCurrentNodeKey(x)}else n.store.value.setCurrentNode(e.node)}),n.currentNode.value=e.node,n.props.expandOnClickNode&&$(),(n.props.checkOnClickNode||e.node.isLeaf&&n.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&W(!e.node.checked),n.ctx.emit("node-click",e.node.data,e.node,v,y)},T=y=>{var w;(w=n.instance.vnode.props)!=null&&w.onNodeContextmenu&&(y.stopPropagation(),y.preventDefault()),n.ctx.emit("node-contextmenu",y,e.node.data,e.node,v)},$=()=>{e.node.isLeaf||(a.value?(n.ctx.emit("node-collapse",e.node.data,e.node,v),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,v)}))},W=y=>{e.node.setChecked(y,!(n!=null&&n.props.checkStrictly)),q(()=>{const w=n.store.value;n.ctx.emit("check",e.node.data,{checkedNodes:w.getCheckedNodes(),checkedKeys:w.getCheckedKeys(),halfCheckedNodes:w.getHalfCheckedNodes(),halfCheckedKeys:w.getHalfCheckedKeys()})})};return{ns:o,node$:h,tree:n,expanded:a,childNodeRendered:s,oldChecked:f,oldIndeterminate:r,getNodeKey:u,getNodeClass:g,handleSelectChange:m,handleClick:C,handleContextMenu:T,handleExpandIconClick:$,handleCheckChange:W,handleChildNodeExpand:(y,w,z)=>{l(w),n.ctx.emit("node-expand",y,w,z)},handleDragStart:y=>{n.props.draggable&&c.treeNodeDragStart({event:y,treeNode:e})},handleDragOver:y=>{y.preventDefault(),n.props.draggable&&c.treeNodeDragOver({event:y,treeNode:{$el:h.value,node:e.node}})},handleDrop:y=>{y.preventDefault()},handleDragEnd:y=>{n.props.draggable&&c.treeNodeDragEnd(y)},CaretRight:ao}}});function vl(e,t,o,l,n,a){const s=J("el-icon"),f=J("el-checkbox"),r=J("loading"),h=J("node-content"),c=J("el-tree-node"),v=J("el-collapse-transition");return pe((S(),I("div",{ref:"node$",class:N([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:F(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:F(e.handleDragStart,["stop"]),onDragover:F(e.handleDragOver,["stop"]),onDragend:F(e.handleDragEnd,["stop"]),onDrop:F(e.handleDrop,["stop"])},[A("div",{class:N(e.ns.be("node","content")),style:Ee({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(S(),U(s,{key:0,class:N([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:F(e.handleExpandIconClick,["stop"])},{default:H(()=>[(S(),U(ze(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):P("v-if",!0),e.showCheckbox?(S(),U(f,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:F(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):P("v-if",!0),e.node.loading?(S(),U(s,{key:2,class:N([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:H(()=>[se(r)]),_:1},8,["class"])):P("v-if",!0),se(h,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),se(v,null,{default:H(()=>[!e.renderAfterExpand||e.childNodeRendered?pe((S(),I("div",{key:0,class:N(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:F(()=>{},["stop"])},[(S(!0),I(_e,null,et(e.node.childNodes,d=>(S(),U(c,{key:e.getNodeKey(d),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:d,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Oe,e.expanded]]):P("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Oe,e.node.visible]])}var gl=ie(pl,[["render",vl],["__file","tree-node.vue"]]);function yl({el$:e},t){const o=_("tree");Te(()=>{n()}),_t(()=>{Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(s=>{s.setAttribute("tabindex","-1")})}),io(e,"keydown",a=>{const s=a.target;if(!s.className.includes(o.b("node")))return;const f=a.code,r=Array.from(e.value.querySelectorAll(`.${o.is("focusable")}[role=treeitem]`)),h=r.indexOf(s);let c;if([de.up,de.down].includes(f)){if(a.preventDefault(),f===de.up){c=h===-1?0:h!==0?h-1:r.length-1;const d=c;for(;!t.value.getNode(r[c].dataset.key).canFocus;){if(c--,c===d){c=-1;break}c<0&&(c=r.length-1)}}else{c=h===-1?0:h<r.length-1?h+1:0;const d=c;for(;!t.value.getNode(r[c].dataset.key).canFocus;){if(c++,c===d){c=-1;break}c>=r.length&&(c=0)}}c!==-1&&r[c].focus()}[de.left,de.right].includes(f)&&(a.preventDefault(),s.click());const v=s.querySelector('[type="checkbox"]');[de.enter,de.numpadEnter,de.space].includes(f)&&v&&(a.preventDefault(),v.click())});const n=()=>{var a;const s=Array.from(e.value.querySelectorAll(`.${o.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(h=>{h.setAttribute("tabindex","-1")});const r=e.value.querySelectorAll(`.${o.is("checked")}[role=treeitem]`);if(r.length){r[0].setAttribute("tabindex","0");return}(a=s[0])==null||a.setAttribute("tabindex","0")}}const ml=Q({name:"ElTree",components:{ElTreeNode:gl},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:rt}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:o}=Yt(),l=_("tree"),n=oe(Ie,null),a=D(new cl({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));a.value.initialize();const s=D(a.value.root),f=D(null),r=D(null),h=D(null),{broadcastExpanded:c}=sn(e),{dragState:v}=hl({props:e,ctx:t,el$:r,dropIndicator$:h,store:a});yl({el$:r},a);const d=k(()=>{const{childNodes:b}=s.value,O=n?n.hasFilteredOptions!==0:!1;return(!b||b.length===0||b.every(({visible:ee})=>!ee))&&!O});B(()=>e.currentNodeKey,b=>{a.value.setCurrentNodeKey(b)}),B(()=>e.defaultCheckedKeys,b=>{a.value.setDefaultCheckedKey(b)}),B(()=>e.defaultExpandedKeys,b=>{a.value.setDefaultExpandedKeys(b)}),B(()=>e.data,b=>{a.value.setData(b)},{deep:!0}),B(()=>e.checkStrictly,b=>{a.value.checkStrictly=b});const u=b=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");a.value.filter(b)},g=b=>Ct(e.nodeKey,b.data),m=b=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const O=a.value.getNode(b);if(!O)return[];const ee=[O.data];let ge=O.parent;for(;ge&&ge!==s.value;)ee.push(ge.data),ge=ge.parent;return ee.reverse()},C=(b,O)=>a.value.getCheckedNodes(b,O),T=b=>a.value.getCheckedKeys(b),$=()=>{const b=a.value.getCurrentNode();return b?b.data:null},W=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const b=$();return b?b[e.nodeKey]:null},K=(b,O)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");a.value.setCheckedNodes(b,O)},M=(b,O)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");a.value.setCheckedKeys(b,O)},re=(b,O,ee)=>{a.value.setChecked(b,O,ee)},j=()=>a.value.getHalfCheckedNodes(),ue=()=>a.value.getHalfCheckedKeys(),y=(b,O=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");ft(a,t.emit,()=>{c(b),a.value.setUserCurrentNode(b,O)})},w=(b,O=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");ft(a,t.emit,()=>{c(),a.value.setCurrentNodeKey(b,O)})},z=b=>a.value.getNode(b),x=b=>{a.value.remove(b)},nt=(b,O)=>{a.value.append(b,O)},ot=(b,O)=>{a.value.insertBefore(b,O)},lt=(b,O)=>{a.value.insertAfter(b,O)},ve=(b,O,ee)=>{c(O),t.emit("node-expand",b,O,ee)},Ve=(b,O)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");a.value.updateChildren(b,O)};return be("RootTree",{ctx:t,props:e,store:a,root:s,currentNode:f,instance:De()}),be(Mo,void 0),{ns:l,store:a,root:s,currentNode:f,dragState:v,el$:r,dropIndicator$:h,isEmpty:d,filter:u,getNodeKey:g,getNodePath:m,getCheckedNodes:C,getCheckedKeys:T,getCurrentNode:$,getCurrentKey:W,setCheckedNodes:K,setCheckedKeys:M,setChecked:re,getHalfCheckedNodes:j,getHalfCheckedKeys:ue,setCurrentNode:y,setCurrentKey:w,t:o,getNode:z,remove:x,append:nt,insertBefore:ot,insertAfter:lt,handleNodeExpand:ve,updateKeyChildren:Ve}}});function bl(e,t,o,l,n,a){const s=J("el-tree-node");return S(),I("div",{ref:"el$",class:N([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(S(!0),I(_e,null,et(e.root.childNodes,f=>(S(),U(s,{key:e.getNodeKey(f),node:f,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(S(),I("div",{key:0,class:N(e.ns.e("empty-block"))},[R(e.$slots,"empty",{},()=>{var f;return[A("span",{class:N(e.ns.e("empty-text"))},le((f=e.emptyText)!=null?f:e.t("el.tree.emptyText")),3)]})],2)):P("v-if",!0),pe(A("div",{ref:"dropIndicator$",class:N(e.ns.e("drop-indicator"))},null,2),[[Oe,e.dragState.showDropIndicator]])],2)}var Cl=ie(ml,[["render",bl],["__file","tree.vue"]]);const pt=Fe(Cl),kl=(e,{attrs:t,emit:o},{select:l,tree:n,key:a})=>{const s=_("tree-select");return B(()=>e.data,()=>{e.filterable&&q(()=>{var r,h;(h=n.value)==null||h.filter((r=l.value)==null?void 0:r.states.inputValue)})},{flush:"post"}),Z(V(V({},tt(We(e),Object.keys(ut.props))),t),{class:k(()=>t.class),style:k(()=>t.style),"onUpdate:modelValue":r=>o(te,r),valueKey:a,popperClass:k(()=>{const r=[s.e("popper")];return e.popperClass&&r.push(e.popperClass),r.join(" ")}),filterMethod:(r="")=>{var h;e.filterMethod?e.filterMethod(r):e.remoteMethod?e.remoteMethod(r):(h=n.value)==null||h.filter(r)}})},Nl=Q({extends:Qt,setup(e,t){const o=Qt.setup(e,t);delete o.selectOptionClick;const l=De().proxy;return q(()=>{o.select.states.cachedOptions.get(l.value)||o.select.onOptionCreate(l)}),B(()=>t.attrs.visible,n=>{q(()=>{o.states.visible=n})},{immediate:!0}),o},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function vt(e){return e||e===0}function kt(e){return G(e)&&e.length}function ke(e){return G(e)?e:vt(e)?[e]:[]}function Xe(e,t,o,l,n){for(let a=0;a<e.length;a++){const s=e[a];if(t(s,a,e,n))return l?l(s,a,e,n):s;{const f=o(s);if(kt(f)){const r=Xe(f,t,o,l,s);if(r)return r}}}}function Ze(e,t,o,l){for(let n=0;n<e.length;n++){const a=e[n];t(a,n,e,l);const s=o(a);kt(s)&&Ze(s,t,o,a)}}const Sl=(e,{attrs:t,slots:o,emit:l},{select:n,tree:a,key:s})=>{B(()=>e.modelValue,()=>{e.showCheckbox&&q(()=>{const d=a.value;d&&!we(d.getCheckedKeys(),ke(e.modelValue))&&d.setCheckedKeys(ke(e.modelValue))})},{immediate:!0,deep:!0});const f=k(()=>V({value:s.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf"},e.props)),r=(d,u)=>{var g;const m=f.value[d];return ae(m)?m(u,(g=a.value)==null?void 0:g.getNode(r("value",u))):u[m]},h=ke(e.modelValue).map(d=>Xe(e.data||[],u=>r("value",u)===d,u=>r("children",u),(u,g,m,C)=>C&&r("value",C))).filter(d=>vt(d)),c=k(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const d=[];return Ze(e.data.concat(e.cacheData),u=>{const g=r("value",u);d.push({value:g,currentLabel:r("label",u),isDisabled:r("disabled",u)})},u=>r("children",u)),d}),v=()=>{var d;return(d=a.value)==null?void 0:d.getCheckedKeys().filter(u=>{var g;const m=(g=a.value)==null?void 0:g.getNode(u);return!co(m)&&ro(m.childNodes)})};return Z(V(V({},tt(We(e),Object.keys(pt.props))),t),{nodeKey:s,expandOnClickNode:k(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:k(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(h):h),renderContent:(d,{node:u,data:g,store:m})=>d(Nl,{value:r("value",g),label:r("label",g),disabled:r("disabled",g),visible:u.visible},e.renderContent?()=>e.renderContent(d,{node:u,data:g,store:m}):o.default?()=>o.default({node:u,data:g,store:m}):void 0),filterNodeMethod:(d,u,g)=>e.filterNodeMethod?e.filterNodeMethod(d,u,g):d?new RegExp(Zt(d),"i").test(r("label",u)||""):!0,onNodeClick:(d,u,g)=>{var m,C,T,$;if((m=t.onNodeClick)==null||m.call(t,d,u,g),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||u.isLeaf)){if(!r("disabled",d)){const W=(C=n.value)==null?void 0:C.states.options.get(r("value",d));(T=n.value)==null||T.handleOptionSelect(W)}}else e.expandOnClickNode&&g.proxy.handleExpandIconClick();($=n.value)==null||$.focus()}},onCheck:(d,u)=>{var g;if(!e.showCheckbox)return;const m=r("value",d),C={};Ze([a.value.store.root],K=>C[K.key]=K,K=>K.childNodes);const T=u.checkedKeys,$=e.multiple?ke(e.modelValue).filter(K=>!(K in C)&&!T.includes(K)):[],W=$.concat(T);if(e.checkStrictly)l(te,e.multiple?W:W.includes(m)?m:void 0);else if(e.multiple){const K=v();l(te,$.concat(K))}else{const K=Xe([d],j=>!kt(r("children",j))&&!r("disabled",j),j=>r("children",j)),M=K?r("value",K):void 0,re=vt(e.modelValue)&&!!Xe([d],j=>r("value",j)===e.modelValue,j=>r("children",j));l(te,M===e.modelValue||re?void 0:M)}q(()=>{var K;const M=ke(e.modelValue);a.value.setCheckedKeys(M),(K=t.onCheck)==null||K.call(t,d,{checkedKeys:a.value.getCheckedKeys(),checkedNodes:a.value.getCheckedNodes(),halfCheckedKeys:a.value.getHalfCheckedKeys(),halfCheckedNodes:a.value.getHalfCheckedNodes()})}),(g=n.value)==null||g.focus()},onNodeExpand:(d,u,g)=>{var m;(m=t.onNodeExpand)==null||m.call(t,d,u,g),q(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&u.checked){const C={},T=a.value.getCheckedKeys();Ze([a.value.store.root],K=>C[K.key]=K,K=>K.childNodes);const $=ke(e.modelValue).filter(K=>!(K in C)&&!T.includes(K)),W=v();l(te,$.concat(W))}})},cacheOptions:c})};var El=Q({props:{data:{type:Array,default:()=>[]}},setup(e){const t=oe(Ie);return B(()=>e.data,()=>{var o;e.data.forEach(n=>{t.states.cachedOptions.has(n.value)||t.states.cachedOptions.set(n.value,n)});const l=((o=t.selectRef)==null?void 0:o.querySelectorAll("input"))||[];gt&&!Array.from(l).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const wl=Q({name:"ElTreeSelect",inheritAttrs:!1,props:Z(V(V({},ut.props),pt.props),{cacheData:{type:Array,default:()=>[]}}),setup(e,t){const{slots:o,expose:l}=t,n=D(),a=D(),s=k(()=>e.nodeKey||e.valueKey||"value"),f=kl(e,t,{select:n,tree:a,key:s}),v=Sl(e,t,{select:n,tree:a,key:s}),{cacheOptions:r}=v,h=Rt(v,["cacheOptions"]),c=ce({});return l(c),Te(()=>{Object.assign(c,V(V({},tt(a.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),tt(n.value,["focus","blur","selectedLabel"])))}),()=>He(ut,ce(Z(V({},f),{ref:d=>n.value=d})),Z(V({},o),{default:()=>[He(El,{data:r.value}),He(pt,ce(Z(V({},h),{ref:d=>a.value=d})))]}))}});var Kl=ie(wl,[["__file","tree-select.vue"]]);const jl=Fe(Kl);export{jl as ElTreeSelect,jl as default};
